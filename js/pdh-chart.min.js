const COLOR_CHART=["#777","#888","#999","#aaa","#bbb","#ccc","#ddd","#eee"],DATA_CHART_BARHORIZONTAL=[{day:"1",sales:4},{day:"2",sales:2},{day:"3",sales:10},{day:"4",sales:7},{day:"5",sales:7},{day:"6",sales:6},{day:"7",sales:2},{day:"8",sales:2},{day:"9",sales:4},{day:"10",sales:9}],DATA_CHART_BARVERTICAL=[{state:"Saudi Arabia",year1970:192.2,year1980:509.8,year1990:342.6,year2000:456.3},{state:"USA",year1970:533.5,year1980:480.2,year1990:416.6,year2000:352.6},{state:"China",year1970:30.7,year1980:106,year1990:138.3,year2000:162.6},{state:"Canada",year1970:70.1,year1980:83.3,year1990:92.6,year2000:126.9},{state:"Mexico",year1970:24.2,year1980:107.2,year1990:146.3,year2000:171.2}],DATA_CHART_LINE=[{country:"USA",hydro:59.8,oil:937.6,gas:582,coal:564.3,nuclear:187.9},{country:"China",hydro:74.2,oil:308.6,gas:35.1,coal:956.9,nuclear:11.3},{country:"Russia",hydro:40,oil:128.5,gas:361.8,coal:105,nuclear:32.4},{country:"Japan",hydro:22.6,oil:241.5,gas:64.9,coal:120.8,nuclear:64.8},{country:"India",hydro:19,oil:119.3,gas:28.9,coal:204.8,nuclear:3.8},{country:"Germany",hydro:6.1,oil:123.6,gas:77.3,coal:85.7,nuclear:37.8}],DATA_CHART_DOUGHNUT=[{region:"Asia",val:4119626293},{region:"Africa",val:1012956064},{region:"Northern America",val:344124520},{region:"Latin America and the Caribbean",val:590946440},{region:"Europe",val:727082222},{region:"Oceania",val:35104756}],DATA_CHART_BARLINE=[{complaint:"Cold pizza",count:780,cumulativePercentage:29},{complaint:"Not enough cheese",count:120,cumulativePercentage:43},{complaint:"Underbaked or Overbaked",count:52,cumulativePercentage:35},{complaint:"Delayed delivery",count:1123,cumulativePercentage:77},{complaint:"Damaged pizza",count:321,cumulativePercentage:89},{complaint:"Incorrect billing",count:89,cumulativePercentage:62},{complaint:"Wrong size delivered",count:222,cumulativePercentage:100}],HTML_CHART_BARHORIZONTAL_TOOLTIP='\n      <div>\n        <div class="chart-tooltip">\n          <div>\n            <div class="ct_t"></div>\n            <div class="ct_b">\n                <span class="top-series-name"></span> :  <span class="top-series-value"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n      ';function fnChartBarHorizontalTooltip(html){return function(info){console.log(info);const htmlContent=$(html);return htmlContent.find(".ct_t").text("Day "+info.argumentText),htmlContent.find(".top-series-name").text(info.seriesName),htmlContent.find(".top-series-value").text(info.value),{html:htmlContent.html()}}}$(()=>{$(".chart_barhorizontal").dxChart({rotated:!0,dataSource:DATA_CHART_BARHORIZONTAL,series:{label:{visible:!0,backgroundColor:"#ddd"},color:"#bbb",type:"bar",argumentField:"day",valueField:"sales"},argumentAxis:{label:{customizeText(){return`Day ${this.valueText}`}}},valueAxis:{tick:{visible:!1},label:{visible:!1}},tooltip:{enabled:!0,customizeTooltip:fnChartBarHorizontalTooltip(HTML_CHART_BARHORIZONTAL_TOOLTIP)},legend:{visible:!1}})});const HTML_CHART_BARVERTICAL_TOOLTIP='\n      <div>\n        <div class="chart-tooltip">\n          <div>\n            <div class="ct_t"></div>\n            <div class="ct_b">\n                <span class="top-series-name"></span> :  <span class="top-series-value"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n      ';function fnChartBarVerticalTooltip(html){return function(info){console.log(info);const htmlContent=$(html);return htmlContent.find(".ct_t").text(info.argumentText),htmlContent.find(".top-series-name").text(info.seriesName),htmlContent.find(".top-series-value").text(info.value),{html:htmlContent.html()}}}$(()=>{$(".chart_barvertical").dxChart({palette:"soft",dataSource:DATA_CHART_BARVERTICAL,commonSeriesSettings:{ignoreEmptyPoints:!0,barPadding:.5,argumentField:"state",type:"bar"},series:[{valueField:"year1970",name:"1970",label:{visible:!0,backgroundColor:"none"},color:COLOR_CHART[0]},{valueField:"year1980",name:"1980",color:COLOR_CHART[1]},{valueField:"year1990",name:"1990",color:COLOR_CHART[2]},{valueField:"year2000",name:"2000",color:COLOR_CHART[3]}],legend:{visible:!1,verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"right"},tooltip:{enabled:!0,customizeTooltip:fnChartBarVerticalTooltip(HTML_CHART_BARVERTICAL_TOOLTIP)}})});const HTML_CHART_LINE_TOOLTIP='\n      <div>\n        <div class="chart-tooltip">\n          <div>\n            <div class="ct_t"></div>\n            <div class="ct_b"></div>\n          </div>\n        </div>\n      </div>\n      ';function fnChartLineTooltip(html){return function(info){const htmlContent=$(html);return htmlContent.find(".ct_t").text(info.argumentText),info.points.map(i=>{console.log(i),htmlContent.find(".ct_b").append(`<div><span class="top-series-name">${i.seriesName}</span> : <span class="top-series-value">${i.value}</span></div>`)}),{html:htmlContent.html()}}}const types=["line","stackedline","fullstackedline"];$(()=>{const chart=$(".chart_line").dxChart({palette:"Violet",dataSource:DATA_CHART_LINE,commonSeriesSettings:{argumentField:"country",type:types[0]},margin:{bottom:20},argumentAxis:{valueMarginsEnabled:!1,label:{overlappingBehavior:"stagger"}},series:[{valueField:"hydro",name:"Hydro-electric",color:COLOR_CHART[0]},{valueField:"oil",name:"Oil",color:COLOR_CHART[1]},{valueField:"gas",name:"Natural gas",color:COLOR_CHART[2]},{valueField:"coal",name:"Coal",color:COLOR_CHART[3]},{valueField:"nuclear",name:"Nuclear",color:COLOR_CHART[4]}],legend:{visible:!1,verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"right"},tooltip:{enabled:!0,shared:!0,customizeTooltip:fnChartLineTooltip(HTML_CHART_LINE_TOOLTIP)}});$("#types").dxSelectBox({dataSource:types,value:types[0],onValueChanged(e){chart.option("commonSeriesSettings.type",e.value)}})}),$(()=>{$(".chart_doughnut").dxPieChart({type:"doughnut",palette:"Soft Pastel",dataSource:DATA_CHART_DOUGHNUT,tooltip:{enabled:!0,format:"millions",customizeTooltip:arg=>({text:`${arg.valueText} - ${(100*arg.percent).toFixed(2)}%`})},legend:{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"right"},series:[{argumentField:"region",label:{visible:!0,format:"millions",connector:{visible:!0,width:1},position:"columns",backgroundColor:"none"}}],customizePoint:a=>({color:COLOR_CHART_PIE[a.index],hoverStyle:{color:COLOR_CHART_PIE[a.index]}})})});const TREEMAP_DATA={name:"test",children:[{name:"농구",children:[{name:"AA",value:[56746,3456,456,7456,23234]},{name:"AB",value:[567,5634,4567,345,456734]},{name:"AC",value:[567,5678,456,6789,890]}]},{name:"축구",children:[{name:"BA",value:[456,4566,2341,3456,45567]},{name:"BB",value:[3456,3456,3456,345,345]},{name:"BC",value:[67456,4567,456,567456,23434]}]},{name:"배구",children:[{name:"CA",value:[45745,342,4356,526456,21234]},{name:"CB",value:[57456,1234,456,12341,1234]},{name:"CC",value:[12234,234,456,123414,14134]}]},{name:"야구",children:[{name:"DA",value:[52345,1234,1234,123,456345]},{name:"DB",value:[56746,4567,456,56456,67856]},{name:"DC",value:[33456,5678,5678,56778,3456]}]},{name:"탁구",children:[{name:"EA",value:[7456,4356,456,56456,1234]},{name:"EB",value:[5456,45567,2356,56876,78696]},{name:"EC",value:[2345,3456,456,2345,45674]}]}]},TREEMAP=chartTreemap({dom:".chart_treemap",width:414,height:414});function chartTooltip({target:target}){const _tooltip=d3.select(target).append("div").attr("class","tooltip").style("opacity",0),mouseenter=function(e){_tooltip.style("opacity",1)},mousemove=function(e,d){_tooltip.html(`<span class="tooltip_name">${d.data.name}</span><span class="tooltip_value">${d.value}</span>`).style("left",e.offsetX+"px").style("top",e.offsetY+"px")},mouseleave=function(e){_tooltip.style("opacity",0)};return{_tooltip:_tooltip,mouseenter:mouseenter,mousemove:mousemove,mouseleave:mouseleave}}function chartTreemapData({data:data,index:index}){return d3.hierarchy(data).sum(d=>Array.isArray(d.value)?d.value[index]:0).sort((a,b)=>b.height-a.height||b.value-a.value)}function chartTreemapDataParent({leaves:leaves,index:index}){const dpArr=leaves.map(d=>d.ancestors().slice(index)[0]);return dpArr.filter((item,i)=>dpArr.findIndex((item2,j)=>item.data.name===item2.data.name)===i)}function chartTreemap({dom:dom,tile:tile=d3.treemapBinary,width:width=960,height:height=960,margin:margin=0,marginTop:marginTop=margin,marginRight:marginRight=margin,marginBottom:marginBottom=margin,marginLeft:marginLeft=margin,padding:padding=0,paddingInner:paddingInner=padding,paddingOuter:paddingOuter=padding,paddingTop:paddingTop=paddingOuter,paddingRight:paddingRight=paddingOuter,paddingBottom:paddingBottom=paddingOuter,paddingLeft:paddingLeft=paddingOuter,round:round=!0,colors:colors=d3.schemeTableau10}){const root=chartTreemapData({data:TREEMAP_DATA,index:0}),leaves=root.leaves(),G=leaves.map(d=>d.ancestors().slice(-2)[0].data.name),zDomain=new d3.InternSet(G),color=d3.scaleOrdinal(zDomain,COLOR_CHART),label=(d,n)=>[...d.name.split(/(?=[A-Z][a-z])/g),n.value.toLocaleString("en")].join("\n"),L=leaves.map(d=>label(d.data,d));root.sort((a,b)=>d3.descending(a.value,b.value));const _treemap=d3.treemap().tile(tile).size([width-marginLeft-marginRight,height-marginTop-marginBottom]).paddingInner(paddingInner).paddingTop(paddingTop).paddingRight(paddingRight).paddingBottom(paddingBottom).paddingLeft(paddingLeft).round(round);_treemap(root);const uid=`O-${Math.random().toString(16).slice(2)}`,svg=d3.create("svg").attr("viewBox",[-marginLeft,-marginTop,width,height]).attr("width",width).attr("height",height),node=svg.selectAll().data(leaves).join("g").attr("class","square-g").attr("transform",d=>`translate(${d.x0},${d.y0})`);node.append("rect").attr("class","square-rect").attr("fill",(d,i)=>color(G[i])).attr("stroke","black").attr("stroke-width","1px").attr("stroke-opacity","0.16").attr("width",d=>d.x1-d.x0).attr("height",d=>d.y1-d.y0),node.append("clipPath").attr("id",(d,i)=>`${uid}-clip-${i}`).append("rect").attr("width",d=>d.x1-d.x0).attr("height",d=>d.y1-d.y0),node.append("text").attr("class","square-text").attr("clip-path",(d,i)=>`url(${new URL(`#${uid}-clip-${i}`,location)})`).attr("font-size","12px").attr("font-weight","bold").attr("fill","#fff").attr("fill-opacity","0.48").selectAll("tspan").data((d,i)=>`${L[i]}`.split(/\n/g)).join("tspan").attr("x",6).attr("y",(d,i,D)=>`${1.4*i+1.4}em`).text(d=>d);const textNode=svg.selectAll().data(chartTreemapDataParent({leaves:leaves,index:-2})).join("text").attr("class","text-parent").attr("transform",d=>`translate(${d.x0},${d.y0})`).attr("font-size","16px").attr("font-weight","bold").attr("fill","#fff").attr("fill-opacity","1").selectAll("tspan").data((d,i)=>[d.data.name,d.value]).join("tspan").attr("x",6).attr("y",(d,i,D)=>`${1.4*i+1.4}em`).text(d=>d);return Object.assign(svg.node(),{update(index){const _leaves=_treemap(chartTreemapData({data:TREEMAP_DATA,index:index})).leaves();svg.selectAll(".square-g").data(_leaves).transition().duration(500).ease(d3.easeLinear).call(node=>node.attr("transform",d=>`translate(${d.x0},${d.y0})`)).call(node=>node.select("rect").attr("width",d=>d.x1-d.x0).attr("height",d=>d.y1-d.y0)).call(node=>node.select("clipPath rect").attr("width",d=>d.x1-d.x0).attr("height",d=>d.y1-d.y0)).call(node=>node.select("text tspan:last-child").text(d=>d.value)),svg.selectAll(".text-parent").data(chartTreemapDataParent({leaves:_leaves,index:-2})).transition().duration(500).ease(d3.easeLinear).attr("transform",d=>`translate(${d.x0},${d.y0})`).call(node=>node.select(".depth01 tspan:last-child").text(d=>d.value))}})}document.querySelector(".chart_treemap").append(TREEMAP);const DATA_CAHRT_PIE=[{country:"Russia",area:34},{country:"Canada",area:54},{country:"USA",area:52},{country:"China",area:65},{country:"Brazil",area:16},{country:"Australia",area:25},{country:"India",area:32},{country:"Others",area:55}],COLOR_CHART_PIE=["#777","#888","#999","#aaa","#bbb","#ccc","#ddd","#eee"];function chartPie({data:data,target:target,height:height,x1KeyName:x1KeyName,x1ValueName:x1ValueName}){$(target).dxPieChart({size:{height:height},dataSource:data,legend:{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"right"},series:[{argumentField:x1KeyName,valueField:x1ValueName,label:{visible:!0,backgroundColor:"none",customizeText(e){const html=`${e.argument} ${e.valueText}`;return html},connector:{visible:!0,width:1},position:"columns"}}],customizePoint:a=>({color:COLOR_CHART_PIE[a.index],hoverStyle:{color:COLOR_CHART_PIE[a.index]}})})}$(document).ready((function(){chartPie({data:DATA_CAHRT_PIE,target:".chart_pie",height:414,x1KeyName:Object.keys(DATA_CAHRT_PIE[0])[0],x1ValueName:Object.keys(DATA_CAHRT_PIE[0])[1]})}));const HTML_CHART_BARLINE_TOOLTIP='\n<div>\n  <div class="chart-tooltip">\n    <div>\n      <div class="ct_t"></div>\n      <div class="ct_b">\n          <span class="top-series-name"></span> : <span class="top-series-value"></span>\n          <br />\n          <span class="bottom-series-name"></span> : <span class="bottom-series-value"></span>%\n      </div>\n    </div>\n  </div>\n</div>\n';function fnChartBarLineTooltip(html){return function(info){const htmlContent=$(html);return htmlContent.find(".ct_t").text(info.argumentText),htmlContent.find(".top-series-name").text(info.points[0].seriesName),htmlContent.find(".top-series-value").text(info.points[0].valueText),htmlContent.find(".bottom-series-name").text(info.points[1].seriesName),htmlContent.find(".bottom-series-value").text(info.points[1].valueText),{html:htmlContent.html()}}}function chartBarLine({dataSource:dataSource,target:target,fnTooltip:fnTooltip,legend:legend,exportEnable:exportEnable}){$(target).dxChart({dataSource:dataSource,argumentAxis:{label:{overlappingBehavior:"stagger"}},tooltip:{enabled:!0,shared:!0,customizeTooltip:fnTooltip},valueAxis:[{name:"frequency",position:"left"},{name:"percentage",position:"right",showZero:!0,label:{customizeText:info=>`${info.valueText}%`},valueMarginsEnabled:!1}],commonSeriesSettings:{type:"bar",argumentField:"complaint",barPadding:.5},series:[{type:"bar",valueField:"count",axis:"frequency",name:"Complaint",color:"#ddd"},{type:"line",valueField:"cumulativePercentage",axis:"percentage",name:"Cumulative",color:"#bbb"}],legend:null!==legend?legend:null,export:{enabled:exportEnable}})}$(document).ready((function(){chartBarLine({dataSource:DATA_CHART_BARLINE,target:".chart_barline",fnTooltip:fnChartBarLineTooltip(HTML_CHART_BARLINE_TOOLTIP),exportEnable:!1,legend:{visible:!1,verticalAlignment:"top",horizontalAlignment:"center"}})}));